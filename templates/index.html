<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DSATUR - Coloração de Grafos</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>
    <div id="bar">
        <h2>Trabalho de Grafos - DIM0549</h2>
    </div>

    <div class="container mt-4">

        <h1>Algoritmo DSATUR</h1>
        <p>Escolha um grafo para executar a coloração.</p>

        <form id="algorithm-form" method="post" action="/run-algorithm">

            <!-- Algoritmo Fixo -->
            <div class="mb-3">
                <label class="form-label"><strong>Algoritmo Selecionado:</strong></label>
                <input type="text" class="form-control" value="DSATUR" disabled>
                <input type="hidden" name="algorithm" value="dsatur">
            </div>

            <!-- Arquivo do Grafo -->
            <div class="mb-3">
                <label for="graph-file" class="form-label"><strong>Escolha o Grafo:</strong></label>
                <select id="graph-file" name="graph_file" class="form-select" required>
                    <option value="">Carregando...</option>
                </select>
            </div>

            <hr>

            <button type="submit" id="submit-button" class="btn btn-primary" disabled>
                Executar DSATUR
            </button>
        </form>
    </div>


    <script>
        // Carrega dinamicamente os grafos via API
        async function loadGraphs() {
            try {
                const response = await fetch('/api/get-graphs');
                const data = await response.json();

                const graphSelect = document.getElementById('graph-file');
                graphSelect.innerHTML = "";

                if (data.graphs.length === 0) {
                    graphSelect.innerHTML = "<option value=''>Nenhum grafo encontrado</option>";
                    return;
                }

                graphSelect.innerHTML = "<option value=''>Selecione...</option>";
                data.graphs.forEach(file => {
                    const opt = document.createElement('option');
                    opt.value = file;
                    opt.textContent = file;
                    graphSelect.appendChild(opt);
                });

                graphSelect.addEventListener('change', () => {
                    document.getElementById('submit-button').disabled = (graphSelect.value === "");
                });

            } catch (e) {
                console.error("Erro ao carregar grafos:", e);
            }
        }

        loadGraphs();
    </script>

</body>
</html>
